#!/bin/bash #for-shellcheck
# shellcheck disable=SC2142 # Allow fancy pants aliases with positional parameters
# This file gets sourced from .bashrc

# ls aliases
# https://www.gnu.org/software/coreutils/manual/html_node/Block-size.html
alias ls="BLOCK_SIZE=\'1 ls --color=auto" #enable thousands grouping and colour
alias l="ls -bCF"         # escape non printable || columns || decorated
alias la="ls -CAFb"       # Almost all - no . and ..
alias ld="ls -dlaFb */"   # no-dereference symlinks, directory entry instead of contents
alias ll="ls -laFb"
alias ls.="ls -dbCF .[^.]?*" # Hidden files except . and .. (currend directory only)
alias lsd="ls -Abl | grep --color=never ^d"   # list only directories

alias -- -="cd -" # go to previous dir
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias .....="cd ../../../.."

# One letter aliases
alias g="git"
alias h="history"
alias j="jobs"
alias r="rake"
alias s="git s"

# Two letters
alias gh="git logda" # Git History
alias jc=journalctl
alias sc='sudo systemctl'

# Completions for aliases
# https://brbsix.github.io/2015/11/23/perform-tab-completion-for-aliases-in-bash/
# https://unix.stackexchange.com/questions/4219/how-do-i-get-bash-completion-for-command-aliases
# General format: complete -o bashdefault -o default -o nospace -F _git g
_completion_loader systemctl; complete -o bashdefault -o default -o nospace -F _systemctl sc

# Configuration of base command
alias ag='ag --color'
alias cal='cal -3' # show 3 months by default
alias cp='cp --reflink=auto --sparse=always'
alias cuc=cucumber
alias diff='diff --color=auto'
alias grep='GREP_COLOR="1;33;40" LANG=C grep --color=auto'
alias home='git --git-dir=$HOME/.githome --work-tree=$HOME'
alias nixnote2='LD_PRELOAD=libcurl.so.3 nixnote2 &'
alias pac='pacmatic' # no sudo so pacaur will process AUR
alias rsync='rsync --sparse'
alias tmux='TERM=xterm-256color tmux -f "$XDG_CONFIG_HOME"/tmux/tmux.conf'
alias tmuxinator='TERM=xterm-256color tmuxinator'
alias vimpager='$XDG_DATA_HOME/vim/bundle/vimpager/vimpager'

alias head='head -n $((${LINES:-12}-2))' # as many as possible without scrolling
alias tail='tail -n $((${LINES:-12}-2)) -s.1' # Likewise, also more responsive -f

alias pbcopy='xclip -selection clipboard -in'
alias pbpaste='xclip -selection clipboard -out'

alias droidsync='f(){ rsync "$@" --no-p --no-o --no-g --rsync-path="su root rsync";};f'
# FAT stores to two-second accuracy, NTFS 100 nanoseconds
# https://corengen.wordpress.com/2010/03/22/comparing-file-timestamps-on-ntfs-and-fat32/
alias fatrsync='f(){ rsync "$@" --modify-window=2 --no-p --no-o --no-g;};f'
alias rsyncmv='rsync -a --remove-source-files'

# Allow completion for git aliases defined above
# See https://github.com/cykerway/complete-alias for a generic solution
if is_function __git_complete; then
  __git_complete g __git_main
  __git_complete home __git_main
  __git_complete s _git_status
fi
